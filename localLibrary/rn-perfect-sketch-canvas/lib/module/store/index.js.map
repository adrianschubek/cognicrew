{"version":3,"names":["getStroke","STROKE_WIDTH","getSvgPathFromStroke","proxy","derive","drawingState","isDrawing","currentPoints","points","strokeWidth","completedPoints","derivedPaths","current","get","size","width","completed","map","point","rest","path"],"sources":["index.ts"],"sourcesContent":["import getStroke from 'perfect-freehand';\nimport { STROKE_WIDTH } from '../components/SketchCanvas/constants';\nimport type {\n  Point,\n  SketchCanvasProps,\n} from '../components/SketchCanvas/types';\nimport { getSvgPathFromStroke } from '../utils';\nimport { proxy } from 'valtio';\nimport { derive } from 'valtio/utils';\n\ninterface CompletedPoints {\n  id: number;\n  points: Point[];\n  color: SketchCanvasProps['strokeColor'];\n  width: SketchCanvasProps['strokeWidth'];\n  style: SketchCanvasProps['strokeStyle'];\n}\n\nexport const drawingState = proxy({\n  isDrawing: false,\n  currentPoints: { points: null, strokeWidth: STROKE_WIDTH } as {\n    points: Point[] | null;\n    width?: SketchCanvasProps['strokeWidth'];\n  },\n  completedPoints: [] as CompletedPoints[],\n});\n\nexport const derivedPaths = derive({\n  current: (get) =>\n    get(drawingState).currentPoints.points !== null\n      ? getSvgPathFromStroke(\n          getStroke(get(drawingState).currentPoints.points!, {\n            size: get(drawingState).currentPoints.width,\n          })\n        )\n      : null,\n  completed: (get) =>\n    get(drawingState).completedPoints.map((point) => {\n      const { points, width, ...rest } = point;\n      return {\n        path: getSvgPathFromStroke(\n          getStroke(points, {\n            size: width,\n          })\n        ),\n        ...rest,\n      };\n    }),\n});\n"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,kBAAtB;AACA,SAASC,YAAT,QAA6B,sCAA7B;AAKA,SAASC,oBAAT,QAAqC,UAArC;AACA,SAASC,KAAT,QAAsB,QAAtB;AACA,SAASC,MAAT,QAAuB,cAAvB;AAUA,OAAO,MAAMC,YAAY,GAAGF,KAAK,CAAC;EAChCG,SAAS,EAAE,KADqB;EAEhCC,aAAa,EAAE;IAAEC,MAAM,EAAE,IAAV;IAAgBC,WAAW,EAAER;EAA7B,CAFiB;EAMhCS,eAAe,EAAE;AANe,CAAD,CAA1B;AASP,OAAO,MAAMC,YAAY,GAAGP,MAAM,CAAC;EACjCQ,OAAO,EAAGC,GAAD,IACPA,GAAG,CAACR,YAAD,CAAH,CAAkBE,aAAlB,CAAgCC,MAAhC,KAA2C,IAA3C,GACIN,oBAAoB,CAClBF,SAAS,CAACa,GAAG,CAACR,YAAD,CAAH,CAAkBE,aAAlB,CAAgCC,MAAjC,EAA0C;IACjDM,IAAI,EAAED,GAAG,CAACR,YAAD,CAAH,CAAkBE,aAAlB,CAAgCQ;EADW,CAA1C,CADS,CADxB,GAMI,IAR2B;EASjCC,SAAS,EAAGH,GAAD,IACTA,GAAG,CAACR,YAAD,CAAH,CAAkBK,eAAlB,CAAkCO,GAAlC,CAAuCC,KAAD,IAAW;IAC/C,MAAM;MAAEV,MAAF;MAAUO,KAAV;MAAiB,GAAGI;IAApB,IAA6BD,KAAnC;IACA,OAAO;MACLE,IAAI,EAAElB,oBAAoB,CACxBF,SAAS,CAACQ,MAAD,EAAS;QAChBM,IAAI,EAAEC;MADU,CAAT,CADe,CADrB;MAML,GAAGI;IANE,CAAP;EAQD,CAVD;AAV+B,CAAD,CAA3B"}