{"version":3,"names":["createHistoryStack","current","stack","index","length","update","JSON","parse","stringify","push","value","undo","redo"],"sources":["create-history-stack.ts"],"sourcesContent":["export default function createHistoryStack<T>(current: T) {\n  const stack = [current];\n\n  let index = stack.length;\n\n  function update() {\n    current = JSON.parse(JSON.stringify(stack[index - 1]));\n\n    return current;\n  }\n\n  return {\n    push: (value: T | ((payload: T) => T)) => {\n      stack.length = index;\n      // @ts-ignore: Value can be a function\n      stack[index++] = typeof value === 'function' ? value(current) : value;\n\n      return update();\n    },\n    undo: () => {\n      if (index > 1) index -= 1;\n      return update();\n    },\n    redo: () => {\n      if (index < stack.length) index += 1;\n      return update();\n    },\n  };\n}\n"],"mappings":";;;;;;;AAAe,SAASA,kBAAT,CAA+BC,OAA/B,EAA2C;EACxD,MAAMC,KAAK,GAAG,CAACD,OAAD,CAAd;EAEA,IAAIE,KAAK,GAAGD,KAAK,CAACE,MAAlB;;EAEA,SAASC,MAAT,GAAkB;IAChBJ,OAAO,GAAGK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,KAAK,CAACC,KAAK,GAAG,CAAT,CAApB,CAAX,CAAV;IAEA,OAAOF,OAAP;EACD;;EAED,OAAO;IACLQ,IAAI,EAAGC,KAAD,IAAoC;MACxCR,KAAK,CAACE,MAAN,GAAeD,KAAf,CADwC,CAExC;;MACAD,KAAK,CAACC,KAAK,EAAN,CAAL,GAAiB,OAAOO,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,CAACT,OAAD,CAAnC,GAA+CS,KAAhE;MAEA,OAAOL,MAAM,EAAb;IACD,CAPI;IAQLM,IAAI,EAAE,MAAM;MACV,IAAIR,KAAK,GAAG,CAAZ,EAAeA,KAAK,IAAI,CAAT;MACf,OAAOE,MAAM,EAAb;IACD,CAXI;IAYLO,IAAI,EAAE,MAAM;MACV,IAAIT,KAAK,GAAGD,KAAK,CAACE,MAAlB,EAA0BD,KAAK,IAAI,CAAT;MAC1B,OAAOE,MAAM,EAAb;IACD;EAfI,CAAP;AAiBD"}