{"version":3,"names":["drawingState","proxy","isDrawing","currentPoints","points","strokeWidth","STROKE_WIDTH","completedPoints","derivedPaths","derive","current","get","getSvgPathFromStroke","getStroke","size","width","completed","map","point","rest","path"],"sources":["index.ts"],"sourcesContent":["import getStroke from 'perfect-freehand';\nimport { STROKE_WIDTH } from '../components/SketchCanvas/constants';\nimport type {\n  Point,\n  SketchCanvasProps,\n} from '../components/SketchCanvas/types';\nimport { getSvgPathFromStroke } from '../utils';\nimport { proxy } from 'valtio';\nimport { derive } from 'valtio/utils';\n\ninterface CompletedPoints {\n  id: number;\n  points: Point[];\n  color: SketchCanvasProps['strokeColor'];\n  width: SketchCanvasProps['strokeWidth'];\n  style: SketchCanvasProps['strokeStyle'];\n}\n\nexport const drawingState = proxy({\n  isDrawing: false,\n  currentPoints: { points: null, strokeWidth: STROKE_WIDTH } as {\n    points: Point[] | null;\n    width?: SketchCanvasProps['strokeWidth'];\n  },\n  completedPoints: [] as CompletedPoints[],\n});\n\nexport const derivedPaths = derive({\n  current: (get) =>\n    get(drawingState).currentPoints.points !== null\n      ? getSvgPathFromStroke(\n          getStroke(get(drawingState).currentPoints.points!, {\n            size: get(drawingState).currentPoints.width,\n          })\n        )\n      : null,\n  completed: (get) =>\n    get(drawingState).completedPoints.map((point) => {\n      const { points, width, ...rest } = point;\n      return {\n        path: getSvgPathFromStroke(\n          getStroke(points, {\n            size: width,\n          })\n        ),\n        ...rest,\n      };\n    }),\n});\n"],"mappings":";;;;;;;AAAA;;AACA;;AAKA;;AACA;;AACA;;;;AAUO,MAAMA,YAAY,GAAG,IAAAC,aAAA,EAAM;EAChCC,SAAS,EAAE,KADqB;EAEhCC,aAAa,EAAE;IAAEC,MAAM,EAAE,IAAV;IAAgBC,WAAW,EAAEC;EAA7B,CAFiB;EAMhCC,eAAe,EAAE;AANe,CAAN,CAArB;;AASA,MAAMC,YAAY,GAAG,IAAAC,cAAA,EAAO;EACjCC,OAAO,EAAGC,GAAD,IACPA,GAAG,CAACX,YAAD,CAAH,CAAkBG,aAAlB,CAAgCC,MAAhC,KAA2C,IAA3C,GACI,IAAAQ,2BAAA,EACE,IAAAC,wBAAA,EAAUF,GAAG,CAACX,YAAD,CAAH,CAAkBG,aAAlB,CAAgCC,MAA1C,EAAmD;IACjDU,IAAI,EAAEH,GAAG,CAACX,YAAD,CAAH,CAAkBG,aAAlB,CAAgCY;EADW,CAAnD,CADF,CADJ,GAMI,IAR2B;EASjCC,SAAS,EAAGL,GAAD,IACTA,GAAG,CAACX,YAAD,CAAH,CAAkBO,eAAlB,CAAkCU,GAAlC,CAAuCC,KAAD,IAAW;IAC/C,MAAM;MAAEd,MAAF;MAAUW,KAAV;MAAiB,GAAGI;IAApB,IAA6BD,KAAnC;IACA,OAAO;MACLE,IAAI,EAAE,IAAAR,2BAAA,EACJ,IAAAC,wBAAA,EAAUT,MAAV,EAAkB;QAChBU,IAAI,EAAEC;MADU,CAAlB,CADI,CADD;MAML,GAAGI;IANE,CAAP;EAQD,CAVD;AAV+B,CAAP,CAArB"}